<!DOCTYPE html>

<head>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');

    * {
      font-family: 'Roboto', sans-serif;
    }

    .main {
      width: fit-content;
      margin: auto;
      max-width: 750px;
    }

    .main > section > :not(:first-child) {
      margin-left: 20px;
    }

    .main a {
      color: #F00;
    }

    .install .iconify {
      color: green;
      filter: drop-shadow(0 0 0.75rem lime);
    }
  </style>
  <script type="module" src="https://unpkg.com/esp-web-tools@9/dist/web/install-button.js?module"></script>
  <script src="//code.iconify.design/1/1.0.6/iconify.min.js"></script>
  <script>
    async function fetchChangelog() {
      const response = await fetch("https://api.github.com/repos/suchmememanyskill/CYD-Klipper/releases/latest");
      const data = await response.json();
      document.getElementById("changelog-body").innerText = data.body;
      document.getElementById("changelog-header").innerHTML += " " + encodeURI(data.tag_name);
    }

    fetchChangelog();
  </script>
</head>

<body>
  <section class="main">
    <h2>CYD-Klipper <span class="iconify" data-icon="mdi-printer-3d" style="color: orange;"></span></h2>
    <p>An implementation of a Klipper status display on an ESP32 + screen.<br>Uses Moonraker to fetch data.<br><a href="https://github.com/suchmememanyskill/CYD-Klipper">Source code is available on GitHub</a></p>
    
    <section class="changelog">
      <h3 id="changelog-header"><span class="iconify" data-icon="mdi-hammer-wrench" style="color: grey;"></span> Changelog</h3>
      <p id="changelog-body"></p>
    </section>

    <section class="donate">
      <h3><span class="iconify" data-icon="mdi-heart" style="color:orangered; filter: drop-shadow(0 0 0.75rem crimson);"></span> Donate</h3>
      <p>If you found this project helpful, please consider a donation to <a href="https://ko-fi.com/suchmememanyskill">my Ko-Fi</a><br>It would help out a lot in the development of this project!<br>Thank you!</p>
    </section>
    
    <section class="install">
      <h3><span class="iconify" data-icon="mdi-download"></span> Install on ESP32-2432S028 (2.8" Resistive)</h3>
      <p>Note: You may need to hold the 'BOOT' button on the device while pressing install</p>
      <esp-web-install-button
        manifest="https://suchmememanyskill.github.io/CYD-Klipper/esp32-2432S028R.json"></esp-web-install-button>
    </section>
    <section class="install">
      <h3><span class="iconify" data-icon="mdi-download"></span> Install on ESP32-3248S035 (3.5" Capacitive)</h3>
      <p>Note: You may need to hold the 'BOOT' button on the device while pressing install</p>
      <esp-web-install-button
        manifest="https://suchmememanyskill.github.io/CYD-Klipper/esp32-3248S035C.json"></esp-web-install-button>
    </section>
  </section>
</body>